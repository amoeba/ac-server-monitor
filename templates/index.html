{{ template "_header.html" }}
<main>
    <div class="boxes">
        <div class="box">
            <div class="box-title">Servers Tracked</div>
            <div class="box-content">{{.TotalServersCount}}</div>
        </div>
        <div class="box">
            <div class="box-title">Checks Sent</div>
            <div class="box-content">{{.TotalStatusCount}}</div>
        </div>
        <div class="box">
            <div class="box-title">Last Updated</div>
            <div class="box-content">{{ .LastUpdated }}</div>
        </div>
        <div class="box">
            <div class="box-title">Source</div>
            <div class="box-content">
                <a href="https://github.com/acresources/serverslist"
                    >acresources</a
                >
            </div>
        </div>
    </div>

    <div class="servers">
        <div class="uptime-legend">
            <svg width="100%" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 20">
                <line x1="0" y1="4.5" x2="128" y2="4.5" stroke="black" stroke-width="1"/>
                <line x1="0.5" y1="4" x2="0.5" y2="14" stroke="black" stroke-width="1"/>
                <line x1="127.5" y1="4" x2="127.5" y2="14" stroke="black" stroke-width="1"/>
                <text x="64" y="16" text-anchor="middle" font-size="10" fill="black">last 14 days</text>
            </svg>
        </div>
        {{ range $row := .Servers }}
        <div class="server-status">
            {{ if $row.Status.IsOnline.Valid }}
                {{ if $row.Status.IsOnline.Bool }}
                <svg
                    role="img"
                    aria-labelledby="up"
                    width="16"
                    height="16"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <rect
                        x="0"
                        y="0"
                        width="16"
                        height="16"
                        fill="rgba(0, 200 , 0, 1)"
                    />
                </svg>
                {{ else }}
                <svg
                    role="img"
                    aria-labelledby="down"
                    width="16"
                    height="16"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <rect
                        x="0"
                        y="0"
                        width="16"
                        height="16"
                        fill="rgba(220, 0, 0, 1)"
                    />
                </svg>
                {{ end }}
            {{ else }}
            <svg
                role="img"
                aria-labelledby="unknown"
                width="16"
                height="16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    x="0"
                    y="0"
                    width="16"
                    height="16"
                    fill="rgba(200, 200, 0, 1)"
                />
            </svg>
            {{ end }}
        </div>
        <div class="server-name">
            <a href="/statuses/{{ $row.Name }}">{{ $row.Name }}</a>
        </div>
        <div class="server-bars">
            <div class="bars">
                {{ range $uptime := $row.Uptime }}
                <div
                    class="bar-container"
                    data-tippy-content="<div><strong>{{ $uptime.Date }}</strong></div><div>Uptime: {{ $uptime.UptimeFmt }}%</div><div>Mean: {{ $uptime.RTTMean }} ms</div><div>Range: {{$uptime.RTTMin}}-{{$uptime.RTTMax}} ms</div><div>N: {{ $uptime.N }}</div>"
                >
                    <i
                        class="bar {{ $uptime.UptimeClass }}"
                        style="height: {{ $uptime.Uptime }}%;"
                    ></i>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
</main>
{{ template "_footer.html" }}
