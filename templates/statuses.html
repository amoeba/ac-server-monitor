{{ template "_header.html" }}

<main>
  <div class="breadcrumb">
    <a href="/">Back</a>
  </div>

  <div class="vstack">
    <div>
    <h2>{{ .Server.Name }}</h2>

    <table>
      <tr>
        <td>Type:</td>
        <td>{{ .Server.Type }}</td>
      </tr>
      <tr>
        <td>Emulator:</td>
        <td>{{ .Server.Emulator }}</td>
      </tr>
      <tr>
        <td>Address:</td>
        <td>{{ .Server.Host }}:{{ .Server.Port }}</td>
      </tr>
      <tr>
        <td>Website:</td>
        <td><a href="{{ .Server.WebsiteURL }}">{{ .Server.WebsiteURL }}</a></td>
      </tr>
      <tr>
        <td>Discord:</td>
        <td><a href="{{ .Server.DiscordURL }}">{{ .Server.DiscordURL }}</a></td>
      </tr>
    </table>
  </div>
    <div>
    <h3>Status Over Time (Last 5 Months)</h3>
    <div class="status-legend">
      <div class="legend-item">
        <span class="uptime-square high"></span>
        <span>99%+ uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square mid"></span>
        <span>50-99% uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square low"></span>
        <span>&lt;50% uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square no-data"></span>
        <span>No data</span>
      </div>
    </div>

    <div>
      <div class="time-legend">
        <svg width="100" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20">
          <line x1="0" y1="15" x2="90" y2="15" stroke="black" stroke-width="1"/>
          <polygon points="90,12 98,15 90,18" fill="black"/>
          <text x="0" y="10" text-anchor="start" font-size="10" fill="black">time</text>
        </svg>
      </div>

      <div class="uptime-chart">
        <div class="day-labels">
          <div class="day-label">M</div>
          <div class="day-label">T</div>
          <div class="day-label">W</div>
          <div class="day-label">R</div>
          <div class="day-label">F</div>
          <div class="day-label">S</div>
          <div class="day-label">S</div>
        </div>
        <div class="uptime-grid">
          {{ range $uptime := .ThreeMonthUptime }}
          <div
            class="uptime-square {{ $uptime.UptimeClass }}{{ if eq $uptime.N 0 }} no-data{{ end }}"
            data-tippy-content="<div><strong>{{ $uptime.Date }}</strong></div><div>Uptime: {{ $uptime.UptimeFmt }}%</div><div>Checks: {{ $uptime.N }}</div>{{ if ne $uptime.RTTMean "n/a" }}<div>Avg RTT: {{ $uptime.RTTMean }} ms</div>{{ end }}"
            title="{{ $uptime.Date }}: {{ $uptime.UptimeFmt }}% uptime"
          ></div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
<div>
    <h3>Latest Check Results</h3>
    {{ if not .Statuses.Statuses }}
    No statuses to show.
    {{ else }}
    <table class="checks">
      <thead>
        <tr>
          <th>Status</th>
          <th>Checked At</th>
          <th>RTT</th>
          <th>Message</th>
        </tr>
      </thead>
      {{ range $row := .Statuses.Statuses }}
      <tr>
        <td>
          {{ if eq $row.Status "UP" }}
            <svg
                role="img"
                aria-labelledby="up"
                width="16"
                height="16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    x="0"
                    y="0"
                    width="16"
                    height="16"
                    fill="rgba(0, 200 , 0, 1)"
                />
            </svg>
            {{ else }}
            <svg
                role="img"
                aria-labelledby="down"
                width="16"
                height="16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    x="0"
                    y="0"
                    width="16"
                    height="16"
                    fill="rgba(220, 0, 0, 1)"
                />
            </svg>
            {{ end }}
            {{ $row.Status }}
        </td>
        <td>{{ $row.CreatedAt }}</td>
        <td>{{ $row.RTT }}</td>
        <td>{{ $row.Message }}</td>
      </tr>
      {{ end }}

    </table>
    {{ end }}
  </div>
</div>
</main>
{{ template "_footer.html" }}
