{{ template "_header.html" }}

<main>
  <div class="breadcrumb">
    <a href="/">Back</a>
  </div>

  <div>
    <h2>{{ .Server.Name }}</h2>

    <table>
      <tr>
        <td>Type:</td>
        <td>{{ .Server.Type }}</td>
      </tr>
      <tr>
        <td>Emulator:</td>
        <td>{{ .Server.Emulator }}</td>
      </tr>
      <tr>
        <td>Address:</td>
        <td>{{ .Server.Host }}:{{ .Server.Port }}</td>
      </tr>
      <tr>
        <td>Website:</td>
        <td><a href="{{ .Server.WebsiteURL }}">{{ .Server.WebsiteURL }}</a></td>
      </tr>
      <tr>
        <td>Discord:</td>
        <td><a href="{{ .Server.DiscordURL }}">{{ .Server.DiscordURL }}</a></td>
      </tr>
    </table>

    <h3>Status Over Time (Last 3 Months)</h3>
    <div class="status-legend">
      <div class="legend-item">
        <span class="uptime-square high"></span>
        <span>99%+ uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square mid"></span>
        <span>50-99% uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square low"></span>
        <span>&lt;50% uptime</span>
      </div>
      <div class="legend-item">
        <span class="uptime-square no-data"></span>
        <span>No data</span>
      </div>
    </div>
    
    <div class="uptime-grid">
      {{ range $uptime := .ThreeMonthUptime }}
      <div
        class="uptime-square {{ $uptime.UptimeClass }}{{ if eq $uptime.N 0 }} no-data{{ end }}"
        data-tippy-content="<div><strong>{{ $uptime.Date }}</strong></div><div>Uptime: {{ $uptime.UptimeFmt }}%</div><div>Checks: {{ $uptime.N }}</div>{{ if ne $uptime.RTTMean "n/a" }}<div>Avg RTT: {{ $uptime.RTTMean }} ms</div>{{ end }}"
        title="{{ $uptime.Date }}: {{ $uptime.UptimeFmt }}% uptime"
      ></div>
      {{ end }}
    </div>

    <h3>Latest Check Results</h3>
    {{ if not .Statuses.Statuses }}
    No statuses to show.
    {{ else }}
    <table class="checks">
      <thead>
        <tr>
          <th>Status</th>
          <th>Checked At</th>
          <th>RTT</th>
          <th>Message</th>
        </tr>
      </thead>
      {{ range $row := .Statuses.Statuses }}
      <tr>
        <td>
          {{ if eq $row.Status "UP" }}
            <svg
                role="img"
                aria-labelledby="up"
                width="16"
                height="16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    x="0"
                    y="0"
                    width="16"
                    height="16"
                    fill="rgba(0, 200 , 0, 1)"
                />
            </svg>
            {{ else }}
            <svg
                role="img"
                aria-labelledby="down"
                width="16"
                height="16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    x="0"
                    y="0"
                    width="16"
                    height="16"
                    fill="rgba(220, 0, 0, 1)"
                />
            </svg>
            {{ end }}
            {{ $row.Status }}
        </td>
        <td>{{ $row.CreatedAt }}</td>
        <td>{{ $row.RTT }}</td>
        <td>{{ $row.Message }}</td>
      </tr>
      {{ end }}

    </table>
    {{ end }}
  </div>
</main>
{{ template "_footer.html" }}
